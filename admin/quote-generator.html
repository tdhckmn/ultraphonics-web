<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Quote Generator - Ultraphonics</title>

    <!-- Favicons -->
    <link rel="icon" type="image/x-icon" href="/assets/images/favicon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/images/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/images/favicon-32x32.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/images/apple-touch-icon.png">

    <!-- Google Fonts - Montserrat -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Montserrat', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- jsPDF for PDF generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <style>
        /* Apply Montserrat font globally, but exclude Font Awesome icons */
        body, button, input, select, textarea, h1, h2, h3, h4, h5, h6, p, a, span:not([class*="fa-"]), div:not([class*="fa-"]) {
            font-family: 'Montserrat', sans-serif !important;
        }

        .quote-section {
            border-left: 3px solid #6366f1;
            background: rgba(99, 102, 241, 0.05);
        }

        /* Auth loading spinner */
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .auth-spinner {
            animation: spin 1.5s linear infinite;
        }

        /* Auth loading overlay - matches page background for seamless experience */
        .auth-overlay {
            position: fixed;
            inset: 0;
            background: #0c0a09; /* stone-950 */
            z-index: 200;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: opacity 0.3s ease-out;
        }
        .auth-overlay.fade-out {
            opacity: 0;
            pointer-events: none;
        }
    </style>
</head>
<body class="bg-stone-950 text-stone-100 h-full">

    <!-- Top Bar -->
    <div class="bg-stone-900 border-b border-stone-800 px-6 py-4 flex items-center justify-between sticky top-0 z-50">
        <div class="flex items-center gap-3">
            <a href="client-manager.html?mode=shows" class="text-stone-400 hover:text-white transition-colors">
                <i class="fa-solid fa-arrow-left"></i>
            </a>
            <h1 class="text-xl font-bold text-white">Quote Generator</h1>
            <span class="px-2 py-0.5 bg-amber-500/20 text-amber-400 text-xs font-bold rounded-full border border-amber-500/30">BETA</span>
            <span class="text-sm text-stone-500" id="show-name"></span>
        </div>
        <div class="flex items-center gap-3">
            <button id="download-pdf-btn" class="px-4 py-2 bg-teal-600 text-white rounded-lg font-semibold hover:bg-teal-500 transition-colors flex items-center gap-2">
                <i class="fa-solid fa-file-pdf"></i>
                Download PDF
            </button>
            <button id="save-quote-btn" class="px-4 py-2 bg-indigo-600 text-white rounded-lg font-semibold hover:bg-indigo-500 transition-colors flex items-center gap-2">
                <i class="fa-solid fa-save"></i>
                Save Quote
            </button>
        </div>
    </div>

    <!-- Main Content -->
    <div class="max-w-6xl mx-auto p-6">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <!-- Left: Quote Builder -->
            <div class="space-y-6">
                <div class="bg-stone-900 rounded-xl border border-stone-800 p-6">
                    <h2 class="text-xl font-bold text-white mb-4">Event Details</h2>

                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-semibold text-stone-300 mb-2">Performance Duration</label>
                            <select id="duration" class="w-full px-4 py-3 bg-stone-800 border border-stone-700 rounded-lg text-white focus:outline-none focus:border-indigo-500">
                                <option value="3">3 hours</option>
                                <option value="4">4 hours</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-semibold text-stone-300 mb-2">Number of Band Members</label>
                            <select id="members" class="w-full px-4 py-3 bg-stone-800 border border-stone-700 rounded-lg text-white focus:outline-none focus:border-indigo-500">
                                <option value="4">4 members</option>
                                <option value="5">5 members</option>
                                <option value="6" selected>6 members</option>
                            </select>
                            <p class="text-xs text-stone-500 mt-2">
                                Premium gigs ($1,000+ base) typically use 6 members
                            </p>
                        </div>

                        <div>
                            <label class="block text-sm font-semibold text-stone-300 mb-2">Musician Base Rate</label>
                            <div class="flex items-center gap-2">
                                <span class="text-stone-400">$</span>
                                <input type="number" id="musician-base" min="0" step="50" class="flex-1 px-4 py-3 bg-stone-800 border border-stone-700 rounded-lg text-white focus:outline-none focus:border-indigo-500" readonly>
                            </div>
                            <p class="text-xs text-stone-500 mt-2" id="base-recommendation">
                                Auto-calculated based on operational agreement
                            </p>
                            <div class="mt-2">
                                <label class="flex items-center gap-3 cursor-pointer">
                                    <input type="checkbox" id="custom-rate" class="w-5 h-5 text-indigo-600 bg-stone-800 border-stone-700 rounded focus:ring-indigo-500 focus:ring-2 cursor-pointer">
                                    <span class="text-xs font-semibold text-stone-300">Use custom rate</span>
                                </label>
                            </div>
                        </div>

                        <div>
                            <label class="flex items-center gap-3 cursor-pointer">
                                <input type="checkbox" id="early-arrival" class="w-5 h-5 text-indigo-600 bg-stone-800 border-stone-700 rounded focus:ring-indigo-500 focus:ring-2 cursor-pointer">
                                <div class="flex-1">
                                    <span class="text-sm font-semibold text-stone-300">Early Arrival Premium (+$300)</span>
                                    <p class="text-stone-500 text-xs mt-1">Arrival before 5:00 PM or early venue setup</p>
                                </div>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Travel -->
                <div class="bg-stone-900 rounded-xl border border-stone-800 p-6">
                    <h2 class="text-xl font-bold text-white mb-4">Travel & Lodging</h2>

                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-semibold text-stone-300 mb-2">Travel Distance from Detroit</label>
                            <select id="travel-distance" class="w-full px-4 py-3 bg-stone-800 border border-stone-700 rounded-lg text-white focus:outline-none focus:border-indigo-500">
                                <option value="0">Within 1.5 hours (included)</option>
                                <option value="1">1.5 - 2.5 hours</option>
                                <option value="2">2.5 - 3.5 hours</option>
                                <option value="3">3.5 - 4.5 hours</option>
                                <option value="4">4.5+ hours</option>
                            </select>
                        </div>

                        <div id="lodging-section" class="hidden">
                            <label class="flex items-center gap-3 cursor-pointer">
                                <input type="checkbox" id="lodging-required" class="w-5 h-5 text-indigo-600 bg-stone-800 border-stone-700 rounded focus:ring-indigo-500 focus:ring-2 cursor-pointer">
                                <div class="flex-1">
                                    <span class="text-sm font-semibold text-stone-300">Lodging Required</span>
                                    <p class="text-stone-500 text-xs mt-1">2+ hour one-way travel</p>
                                </div>
                            </label>

                            <div id="lodging-details" class="mt-4 hidden">
                                <label class="block text-sm font-semibold text-stone-300 mb-2">Number of Rooms</label>
                                <input type="number" id="lodging-rooms" min="1" max="6" value="2" class="w-full px-4 py-3 bg-stone-800 border border-stone-700 rounded-lg text-white focus:outline-none focus:border-indigo-500">

                                <label class="block text-sm font-semibold text-stone-300 mb-2 mt-4">Estimated Room Rate</label>
                                <div class="flex items-center gap-2">
                                    <span class="text-stone-400">$</span>
                                    <input type="number" id="room-rate" min="0" value="175" class="flex-1 px-4 py-3 bg-stone-800 border border-stone-700 rounded-lg text-white focus:outline-none focus:border-indigo-500">
                                    <span class="text-stone-400">per room</span>
                                </div>
                                <p class="text-xs text-stone-500 mt-2">Target: $150-$200/room, mid-tier hotel</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Add-ons -->
                <div class="bg-stone-900 rounded-xl border border-stone-800 p-6">
                    <h2 class="text-xl font-bold text-white mb-4">Add-On Services</h2>

                    <div class="space-y-4">
                        <div>
                            <label class="flex items-center gap-3 cursor-pointer">
                                <input type="checkbox" id="cocktail-hour" class="w-5 h-5 text-indigo-600 bg-stone-800 border-stone-700 rounded focus:ring-indigo-500 focus:ring-2 cursor-pointer">
                                <div class="flex-1">
                                    <span class="text-sm font-semibold text-stone-300">Cocktail Hour Live Trio</span>
                                </div>
                            </label>
                            <div id="cocktail-details" class="ml-8 mt-2 hidden">
                                <label class="block text-xs text-stone-500 mb-1">Duration (hours)</label>
                                <input type="number" id="cocktail-hours" min="1" max="3" value="1" step="0.5" class="w-32 px-3 py-2 bg-stone-800 border border-stone-700 rounded-lg text-white text-sm focus:outline-none focus:border-indigo-500">
                                <p class="text-xs text-stone-500 mt-1">$300/hr base + $100 per additional musician</p>
                            </div>
                        </div>

                        <div>
                            <label class="flex items-center gap-3 cursor-pointer">
                                <input type="checkbox" id="additional-audio" class="w-5 h-5 text-indigo-600 bg-stone-800 border-stone-700 rounded focus:ring-indigo-500 focus:ring-2 cursor-pointer">
                                <div class="flex-1">
                                    <span class="text-sm font-semibold text-stone-300">Additional Audio Locations</span>
                                </div>
                            </label>
                            <div id="audio-details" class="ml-8 mt-2 hidden space-y-2">
                                <div>
                                    <label class="block text-xs text-stone-500 mb-1">Basic Packages ($200 each)</label>
                                    <input type="number" id="audio-basic" min="0" max="5" value="0" class="w-32 px-3 py-2 bg-stone-800 border border-stone-700 rounded-lg text-white text-sm focus:outline-none focus:border-indigo-500">
                                    <p class="text-xs text-stone-500 mt-1">Small PA + wireless mic</p>
                                </div>
                                <div>
                                    <label class="block text-xs text-stone-500 mb-1">Premium Packages ($500 each)</label>
                                    <input type="number" id="audio-premium" min="0" max="5" value="0" class="w-32 px-3 py-2 bg-stone-800 border border-stone-700 rounded-lg text-white text-sm focus:outline-none focus:border-indigo-500">
                                    <p class="text-xs text-stone-500 mt-1">Full system with subs</p>
                                </div>
                            </div>
                        </div>

                        <div>
                            <label class="flex items-center gap-3 cursor-pointer">
                                <input type="checkbox" id="additional-musicians" class="w-5 h-5 text-indigo-600 bg-stone-800 border-stone-700 rounded focus:ring-indigo-500 focus:ring-2 cursor-pointer">
                                <div class="flex-1">
                                    <span class="text-sm font-semibold text-stone-300">Additional Musicians</span>
                                </div>
                            </label>
                            <div id="musicians-details" class="ml-8 mt-2 hidden space-y-3">
                                <div>
                                    <label class="block text-xs text-stone-500 mb-1">Number of Musicians</label>
                                    <input type="number" id="musicians-count" min="1" max="10" value="1" class="w-32 px-3 py-2 bg-stone-800 border border-stone-700 rounded-lg text-white text-sm focus:outline-none focus:border-indigo-500">
                                    <p class="text-xs text-stone-500 mt-1">e.g., horn section, pianist, etc.</p>
                                </div>
                                <div>
                                    <label class="block text-xs text-stone-500 mb-1">Rate per Musician</label>
                                    <div class="flex items-center gap-2">
                                        <span class="text-stone-400 text-sm">$</span>
                                        <input type="number" id="musician-rate" min="0" step="50" value="150" class="w-32 px-3 py-2 bg-stone-800 border border-stone-700 rounded-lg text-white text-sm focus:outline-none focus:border-indigo-500">
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-xs text-stone-500 mb-1">Notes (instruments, names, etc.)</label>
                                    <textarea id="musicians-notes" rows="2" class="w-full px-3 py-2 bg-stone-800 border border-stone-700 rounded-lg text-white text-sm focus:outline-none focus:border-indigo-500 resize-y" placeholder="e.g., Saxophone and trumpet for cocktail hour and first set"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right: Quote Summary -->
            <div class="lg:sticky lg:top-24 h-fit">
                <div class="bg-stone-900 rounded-xl border border-stone-800 p-6">
                    <h2 class="text-xl font-bold text-white mb-6">Quote Summary</h2>

                    <div class="space-y-3 mb-6">
                        <div class="flex justify-between text-stone-300">
                            <span>Musician Base</span>
                            <span id="summary-base">$0</span>
                        </div>
                        <div class="flex justify-between text-stone-300" id="summary-early-row" style="display: none;">
                            <span>Early Arrival Premium</span>
                            <span>$300</span>
                        </div>
                        <div class="flex justify-between text-stone-300" id="summary-travel-row" style="display: none;">
                            <span>Travel Compensation</span>
                            <span id="summary-travel">$0</span>
                        </div>
                        <div class="flex justify-between text-stone-300" id="summary-lodging-row" style="display: none;">
                            <span>Lodging</span>
                            <span id="summary-lodging">$0</span>
                        </div>
                        <div class="flex justify-between text-stone-300" id="summary-cocktail-row" style="display: none;">
                            <span>Cocktail Hour</span>
                            <span id="summary-cocktail">$0</span>
                        </div>
                        <div class="flex justify-between text-stone-300" id="summary-audio-row" style="display: none;">
                            <span>Additional Audio</span>
                            <span id="summary-audio">$0</span>
                        </div>
                        <div class="flex justify-between text-stone-300" id="summary-musicians-row" style="display: none;">
                            <span>Additional Musicians</span>
                            <span id="summary-musicians">$0</span>
                        </div>
                    </div>

                    <div class="border-t border-stone-700 pt-4 mb-6">
                        <div class="flex justify-between items-center">
                            <span class="text-2xl font-bold text-white">Total Quote</span>
                            <span class="text-3xl font-bold text-indigo-400" id="total-quote">$0</span>
                        </div>
                    </div>

                    <div class="quote-section p-4 rounded-lg mb-6">
                        <h3 class="text-sm font-bold text-indigo-400 mb-2">Per Member Breakdown</h3>
                        <div class="text-stone-300 text-sm space-y-1">
                            <div class="flex justify-between">
                                <span>Each member receives:</span>
                                <span class="font-semibold" id="per-member">$0</span>
                            </div>
                            <p class="text-xs text-stone-500 mt-2">
                                All performance and add-on revenue distributed evenly among <span id="member-count">5</span> performing members
                            </p>
                        </div>
                    </div>

                    <div class="bg-stone-800 rounded-lg p-4">
                        <h3 class="text-sm font-bold text-stone-300 mb-3">Notes</h3>
                        <textarea id="quote-notes" rows="4" class="w-full px-3 py-2 bg-stone-900 border border-stone-700 rounded-lg text-white text-sm focus:outline-none focus:border-indigo-500 resize-y" placeholder="Add any special notes or conditions for this quote..."></textarea>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase Bundle -->
    <script src="/dist/firebase-bundle.js"></script>

    <!-- Auth Loading Overlay - shows spinning logo while checking auth -->
    <div id="auth-loading" class="auth-overlay">
        <div class="text-center">
            <img src="/assets/images/Ultraphonics-Spiral-192.png" alt="Loading" class="h-16 w-auto mx-auto auth-spinner">
        </div>
    </div>

    <!-- Login Modal - only shown if not authenticated -->
    <div id="login-modal" class="fixed inset-0 bg-stone-950 flex items-center justify-center z-[200] hidden">
        <div id="login-form" class="bg-stone-900 w-full max-w-md mx-auto rounded-xl shadow-2xl border border-stone-700 overflow-hidden m-4">
            <div class="p-6">
                <div class="text-center mb-6">
                    <img src="/assets/images/Ultraphonics-Spiral-192.png" alt="Ultraphonics" class="h-16 w-auto mx-auto mb-4">
                    <h2 class="text-xl font-bold text-white">Admin Login</h2>
                    <p class="text-stone-400 text-sm mt-1">Sign in to create and manage quotes</p>
                </div>

                <div id="login-error" class="text-red-400 text-sm hidden mb-4 text-center"></div>
                <button id="google-sign-in-btn"
                    class="w-full px-4 py-3 bg-white rounded-lg text-gray-800 hover:bg-gray-100 font-semibold transition-colors flex items-center justify-center gap-3">
                    <svg class="w-5 h-5" viewBox="0 0 24 24">
                        <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                        <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                        <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                        <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                    </svg>
                    Sign in with Google
                </button>
            </div>
        </div>
    </div>

    <!-- Quote Generator Script -->
    <script src="src/quote-generator.js"></script>
</body>
</html>
